

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Exploración de Datos (EDA) &#8212; Analisis de localidades y aprovechamiento solar en Barranquilla: Análisis climático por localidad y estimación del potencial energético</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/eda';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Modelos de Regresión" href="metodologia_modelos_regresion.html" />
    <link rel="prev" title="Contextualización:" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Analisis de localidades y aprovechamiento solar en Barranquilla: Análisis climático por localidad y estimación del potencial energético - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Analisis de localidades y aprovechamiento solar en Barranquilla: Análisis climático por localidad y estimación del potencial energético - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Contextualización:
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Exploración de Datos (EDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="metodologia_modelos_regresion.html">Modelos de Regresión</a></li>
<li class="toctree-l1"><a class="reference internal" href="metodologia_modelos_clasificacion.html">Modelos de Clasificación</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/YisusParker/jbook_ml20251" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/eda.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Exploración de Datos (EDA)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#librerias"><strong>Librerias:</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-preliminar"><strong>Análisis preliminar</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-analisis-de-tipos-nulos-y-nan-values"><strong>Variables: análisis de tipos,nulos y Nan values</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-correlacion"><strong>Análisis de correlación:</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-correlacion-entre-variables-climaticas"><strong>Análisis de Correlación entre Variables Climáticas</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#relaciones-fuertemente-positivas">1. Relaciones fuertemente positivas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#relaciones-fuertemente-negativas">2. Relaciones fuertemente negativas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#correlaciones-moderadas-a-bajas">3. Correlaciones moderadas a bajas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusiones">Conclusiones</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-normalidad-y-distribucion-de-variables"><strong>Análisis de Normalidad y Distribución de Variables</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prueba-de-normalidad-shapiro-wilk"><strong>Prueba de Normalidad (Shapiro-Wilk)</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resultados-destacados"><strong>Resultados destacados</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-con-mejor-ajuste-relativo-a-la-normalidad"><strong>Variables con mejor ajuste relativo a la normalidad</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-que-presentan-mayor-desviacion-de-la-normalidad"><strong>Variables que presentan mayor desviación de la normalidad</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-temporales"><strong>Variables temporales</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#prueba-de-independencia-chi-cuadrado"><strong>Prueba de Independencia Chi-Cuadrado</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><strong>Conclusiones</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#limpieza-final"><strong>Limpieza Final</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-visual"><strong>Análisis visual</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-espacial-y-temporal-de-variables-de-microclima-por-localidad-en-barranquilla"><strong>Análisis Espacial y Temporal de Variables de Microclima por Localidad en Barranquilla</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cambios-temporales-de-variables-por-localidad">1. Cambios Temporales de Variables por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-de-variables-por-localidad">2. Distribución de Variables por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#correlacion-entre-variables-por-localidad">3. Correlación entre Variables por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion-general">Conclusión General</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-variables-relacionadas-con-la-energia-solar"><strong>Análisis de Variables Relacionadas con la Energía Solar</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cambios-temporales-por-localidad">Cambios Temporales por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#allsky-sfc-uv-index">ALLSKY_SFC_UV_INDEX</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#allsky-sfc-sw-diff-irradiancia-solar-difusa">ALLSKY_SFC_SW_DIFF (Irradiancia Solar Difusa)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#solarindex">SolarIndex</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-por-localidad">Distribución por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#correlaciones-locales-entre-variables-solares">Correlaciones Locales entre Variables Solares</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Conclusiones</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-del-cambio-de-temperatura-por-localidad-2020-2025"><strong>Análisis del Cambio de Temperatura por Localidad (2020-2025)</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#observaciones-generales">Observaciones Generales</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-por-localidad">Análisis por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Conclusiones</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="exploracion-de-datos-eda">
<h1><strong>Exploración de Datos (EDA)</strong><a class="headerlink" href="#exploracion-de-datos-eda" title="Permalink to this heading">#</a></h1>
<section id="librerias">
<h2><strong>Librerias:</strong><a class="headerlink" href="#librerias" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importing necessary libraries for data manipulation, visualization, and analysis</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>  <span class="c1"># For data manipulation and analysis</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>  <span class="c1"># For numerical computations</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>  <span class="c1"># For creating static visualizations</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>  <span class="c1"># For enhanced data visualizations</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>  <span class="c1"># For geospatial data manipulation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely</span><span class="w"> </span><span class="kn">import</span> <span class="n">wkt</span>  <span class="c1"># For handling Well-Known Text (WKT) geometries</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">folium</span>  <span class="c1"># For creating interactive maps</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>  <span class="c1"># For network analysis</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">stats</span>  <span class="c1"># For statistical computations</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">shapiro</span>  <span class="c1"># For Shapiro-Wilk test for normality</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="analisis-preliminar">
<h2><strong>Análisis preliminar</strong><a class="headerlink" href="#analisis-preliminar" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the dataset from a CSV file</span>
<span class="c1"># Using relative path for portability and ensuring the file exists in the specified location</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;..\data.csv&#39;</span><span class="p">)</span>  <span class="c1"># Ensure the file path is correct and accessible</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the figure size for better readability</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Boxplot for temperature (T2M) by locality</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;T2M&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Boxplot of Temperature (T2M) by Locality&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Locality&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature (°C)&#39;</span><span class="p">)</span>

<span class="c1"># Boxplot for humidity (RH2M) by locality</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;RH2M&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Boxplot of Humidity (RH2M) by Locality&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Locality&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Humidity (%)&#39;</span><span class="p">)</span>

<span class="c1"># Adjust layout and display the plots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">line</span> <span class="mi">6</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># Boxplot for temperature (T2M) by locality</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;T2M&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Boxplot of Temperature (T2M) by Locality&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Locality&#39;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;df_cleaned_limits&#39; is not defined
</pre></div>
</div>
<img alt="../_images/f1f9ad2364bf751c18069f9c1325e9b6505516d0d42f63ccbd2299145f27e827.png" src="../_images/f1f9ad2364bf751c18069f9c1325e9b6505516d0d42f63ccbd2299145f27e827.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the first few rows of the DataFrame</span>
<span class="c1"># This is useful for quickly inspecting the structure, column names, and sample data of the DataFrame.</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>YEAR</th>
      <th>MO</th>
      <th>DY</th>
      <th>HR</th>
      <th>T2M</th>
      <th>PRECTOTCORR</th>
      <th>RH2M</th>
      <th>WS10M</th>
      <th>WD10M</th>
      <th>PS</th>
      <th>ALLSKY_SFC_UV_INDEX</th>
      <th>ALLSKY_SRF_ALB</th>
      <th>ALLSKY_SFC_SW_DIFF</th>
      <th>T2MDEW</th>
      <th>T2MWET</th>
      <th>WS50M</th>
      <th>ALLSKY_KT</th>
      <th>LOCALITY</th>
      <th>NBHD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>26.66</td>
      <td>0.03</td>
      <td>86.19</td>
      <td>7.87</td>
      <td>40.0</td>
      <td>100.66</td>
      <td>0.0</td>
      <td>-999.0</td>
      <td>0.0</td>
      <td>24.19</td>
      <td>25.42</td>
      <td>10.13</td>
      <td>-999.0</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>26.56</td>
      <td>0.03</td>
      <td>85.81</td>
      <td>8.02</td>
      <td>41.8</td>
      <td>100.58</td>
      <td>0.0</td>
      <td>-999.0</td>
      <td>0.0</td>
      <td>24.01</td>
      <td>25.29</td>
      <td>10.31</td>
      <td>-999.0</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>26.43</td>
      <td>0.02</td>
      <td>85.59</td>
      <td>8.05</td>
      <td>42.7</td>
      <td>100.52</td>
      <td>0.0</td>
      <td>-999.0</td>
      <td>0.0</td>
      <td>23.84</td>
      <td>25.14</td>
      <td>10.33</td>
      <td>-999.0</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>26.35</td>
      <td>0.00</td>
      <td>84.96</td>
      <td>8.01</td>
      <td>43.7</td>
      <td>100.49</td>
      <td>0.0</td>
      <td>-999.0</td>
      <td>0.0</td>
      <td>23.63</td>
      <td>24.99</td>
      <td>10.25</td>
      <td>-999.0</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>26.27</td>
      <td>0.00</td>
      <td>84.21</td>
      <td>7.88</td>
      <td>45.6</td>
      <td>100.49</td>
      <td>0.0</td>
      <td>-999.0</td>
      <td>0.0</td>
      <td>23.42</td>
      <td>24.85</td>
      <td>10.08</td>
      <td>-999.0</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the shape of the DataFrame (number of rows and columns)</span>
<span class="c1"># This is useful for understanding the size of the dataset and ensuring it was loaded correctly</span>
<span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1535519, 19)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the columns of the DataFrame</span>
<span class="c1"># This is useful for understanding the structure of the dataset, </span>
<span class="c1"># including the names of the columns, which can help in identifying </span>
<span class="c1"># the variables available for analysis or further processing.</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;YEAR&#39;, &#39;MO&#39;, &#39;DY&#39;, &#39;HR&#39;, &#39;T2M&#39;, &#39;PRECTOTCORR&#39;, &#39;RH2M&#39;, &#39;WS10M&#39;,
       &#39;WD10M&#39;, &#39;PS&#39;, &#39;ALLSKY_SFC_UV_INDEX&#39;, &#39;ALLSKY_SRF_ALB&#39;,
       &#39;ALLSKY_SFC_SW_DIFF&#39;, &#39;T2MDEW&#39;, &#39;T2MWET&#39;, &#39;WS50M&#39;, &#39;ALLSKY_KT&#39;,
       &#39;LOCALITY&#39;, &#39;NBHD&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="variables-analisis-de-tipos-nulos-y-nan-values">
<h2><strong>Variables: análisis de tipos,nulos y Nan values</strong><a class="headerlink" href="#variables-analisis-de-tipos-nulos-y-nan-values" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>T2M:</strong> MERRA-2 Temperatura a 2 Metros (°C)</p></li>
<li><p><strong>RH2M:</strong> MERRA-2 Humedad Relativa a 2 Metros (%)</p></li>
<li><p><strong>PRECTOTCORR:</strong> MERRA-2 Precipitación Corregida (mm/hora)</p></li>
<li><p><strong>WS10M:</strong> MERRA-2 Velocidad del Viento a 10 Metros (m/s)</p></li>
<li><p><strong>WD10M:</strong> MERRA-2 Dirección del Viento a 10 Metros (Grados)</p></li>
<li><p><strong>PS:</strong> MERRA-2 Presión Superficial (kPa)</p></li>
<li><p><strong>ALLSKY_SFC_UV_INDEX:</strong> CERES SYN1deg Índice UV en Superficie Bajo Cielo Total (W m-2 x 40)</p></li>
<li><p><strong>ALLSKY_SFC_SW_DIFF:</strong> CERES SYN1deg Irradiancia Difusa de Onda Corta en Superficie Bajo Cielo Total (Wh/m^2)</p></li>
<li><p><strong>ALLSKY_SRF_ALB:</strong> CERES SYN1deg Albedo Superficial Bajo Cielo Total (adimensional)</p></li>
<li><p><strong>T2MDEW:</strong> MERRA-2 Punto de Rocío/Escarcha a 2 Metros (°C)</p></li>
<li><p><strong>T2MWET:</strong> MERRA-2 Temperatura de Bulbo Húmedo a 2 Metros (°C)</p></li>
<li><p><strong>WS50M:</strong> MERRA-2 Velocidad del Viento a 50 Metros (m/s)</p></li>
<li><p><strong>ALLSKY_KT:</strong> CERES SYN1deg Índice de Claridad de Insolación Bajo Cielo Total (adimensional)</p></li>
<li><p><strong>LOCALITY:</strong> Es la localidad</p></li>
<li><p><strong>NHBD:</strong>	 Neighborhood, es el barrio donde fueron tomados los datos.</p></li>
</ul>
<hr class="docutils" />
<ul class="simple">
<li><p><strong>Variables que seran creadas más adelante:</strong></p></li>
<li><p><strong>SolarIndex:</strong> Índice compuesto del potencial solar, calculado a partir de la irradiancia difusa, índice de claridad e intensidad UV. Representa la aptitud energética solar en  cada punto.</p></li>
<li><p><strong>ICU_Index:</strong> Índice de Isla de Calor Urbana, calculado como una combinación normalizada de temperatura, humedad, presión y viento. Refleja la intensidad térmica urbana local.</p></li>
<li><p><strong>ICU_Categoria:</strong> Clasificación categórica del ICU_Index en niveles como “Sin efecto de isla de calor”, “Leve”, “Moderada” o “Intensa”.</p></li>
</ul>
<hr class="docutils" />
<p>En el análisis de datos  tipo meteorológicos y climáticos, es común encontrar <strong>valores faltantes</strong> que no pueden ser calculados o que están fuera del rango de disponibilidad de las fuentes. Estos valores en este caso han sido representados con un código específico, como <strong>-999</strong>, para indicar su ausencia. En este contexto, se trabajó con un conjunto de variables. Estos mismos, provenientes de fuentes como <strong>MERRA-2</strong> y <strong>CERES SYN1deg</strong>, son fundamentales para estudios climáticos, pero requieren un manejo cuidadoso de los <strong>valores faltantes</strong> para garantizar la precisión y confiabilidad de los análisis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the data types of each column in the DataFrame</span>
<span class="c1"># This is useful for understanding the structure of the dataset, </span>
<span class="c1"># ensuring that the data types are as expected, and identifying </span>
<span class="c1"># any potential issues (e.g., numeric columns stored as objects).</span>
<span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>YEAR                     int64
MO                       int64
DY                       int64
HR                       int64
T2M                    float64
PRECTOTCORR            float64
RH2M                   float64
WS10M                  float64
WD10M                  float64
PS                     float64
ALLSKY_SFC_UV_INDEX    float64
ALLSKY_SRF_ALB         float64
ALLSKY_SFC_SW_DIFF     float64
T2MDEW                 float64
T2MWET                 float64
WS50M                  float64
ALLSKY_KT              float64
LOCALITY                object
NBHD                    object
dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the number of missing values in each column</span>
<span class="c1"># This is useful for identifying columns with missing data, which may require cleaning or imputation</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>YEAR                   0
MO                     0
DY                     0
HR                     0
T2M                    0
PRECTOTCORR            0
RH2M                   0
WS10M                  0
WD10M                  0
PS                     0
ALLSKY_SFC_UV_INDEX    0
ALLSKY_SRF_ALB         0
ALLSKY_SFC_SW_DIFF     0
T2MDEW                 0
T2MWET                 0
WS50M                  0
ALLSKY_KT              0
LOCALITY               0
NBHD                   0
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count the occurrences of the placeholder value -999 in each column</span>
<span class="c1"># This is useful for identifying columns with placeholder values that may need to be replaced or handled</span>
<span class="n">count_neg_999</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span> <span class="o">==</span> <span class="o">-</span><span class="mi">999</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># Display the count of -999 values for each column</span>
<span class="c1"># This helps in understanding the extent of placeholder values in the dataset</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Count of -999 values in each column:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">count_neg_999</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Count of -999 values in each column:
YEAR                        0
MO                          0
DY                          0
HR                          0
T2M                         0
PRECTOTCORR                 0
RH2M                        0
WS10M                       0
WD10M                       0
PS                          0
ALLSKY_SFC_UV_INDEX    130425
ALLSKY_SRF_ALB         365040
ALLSKY_SFC_SW_DIFF     579409
T2MDEW                      0
T2MWET                      0
WS50M                       0
ALLSKY_KT              814249
LOCALITY                    0
NBHD                        0
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select only numeric columns to avoid modifying categorical columns</span>
<span class="n">numeric_cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>

<span class="c1"># Replace placeholder value -999.0 with NaN ONLY in numeric columns</span>
<span class="n">df_cleaned</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Create a copy of the original DataFrame to preserve raw data</span>
<span class="n">df_cleaned</span><span class="p">[</span><span class="n">numeric_cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="p">[</span><span class="n">numeric_cols</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">-</span><span class="mf">999.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

<span class="c1"># Calculate the percentage of missing values per column without altering text columns</span>
<span class="n">missing_per_col</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_cleaned</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>  <span class="c1"># Percentage of missing values per column</span>

<span class="c1"># Calculate the total percentage of missing values in the entire dataset</span>
<span class="n">total_missing</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>  <span class="c1"># Total number of missing values</span>
<span class="n">total_values</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">size</span>  <span class="c1"># Total number of values in the dataset</span>
<span class="n">missing_percentage</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_missing</span> <span class="o">/</span> <span class="n">total_values</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>  <span class="c1"># Overall percentage of missing values</span>

<span class="c1"># Display the results for better understanding of missing data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Percentage of missing values per variable:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">missing_per_col</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Total percentage of missing values:&quot;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">missing_percentage</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s2">&quot;%&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Percentage of missing values per variable:
 YEAR                    0.000000
MO                      0.000000
DY                      0.000000
HR                      0.000000
T2M                     0.000000
PRECTOTCORR             0.000000
RH2M                    0.000000
WS10M                   0.000000
WD10M                   0.000000
PS                      0.000000
ALLSKY_SFC_UV_INDEX     8.493871
ALLSKY_SRF_ALB         23.773070
ALLSKY_SFC_SW_DIFF     37.733756
T2MDEW                  0.000000
T2MWET                  0.000000
WS50M                   0.000000
ALLSKY_KT              53.027608
LOCALITY                0.000000
NBHD                    0.000000
dtype: float64

Total percentage of missing values: 6.48 %
</pre></div>
</div>
</div>
</div>
<p>El dataset presenta un <strong>6.48%</strong> de datos faltantes en general, pero este porcentaje varía considerablemente entre las variables. Las variables con mayor porcentaje de datos faltantes son:
Variable	Porcentaje de Datos Faltantes</p>
<ul class="simple">
<li><p><strong>ALLSKY_SFC_UV_INDEX</strong>	8.49%</p></li>
<li><p><strong>ALLSKY_SRF_ALB</strong>	23.77%</p></li>
<li><p><strong>ALLSKY_SFC_SW_DIFF</strong>	37.73%</p></li>
<li><p><strong>ALLSKY_KT</strong>	53.03%
Estos valores faltantes están representados con el valor -999, que indica que los datos no pudieron calcularse o están fuera del rango de disponibilidad de las fuentes.
Los porcentajes anteriormente mostrados se pueden visualizar de una mejor manera en las graficas siguientes:</p></li>
</ul>
</section>
<section id="analisis-de-correlacion">
<h2><strong>Análisis de correlación:</strong><a class="headerlink" href="#analisis-de-correlacion" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select only numeric columns for correlation analysis</span>
<span class="c1"># This ensures that only numerical data is included in the correlation matrix,</span>
<span class="c1"># avoiding errors or irrelevant results caused by non-numeric data.</span>
<span class="n">numeric_cols</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculate the correlation matrix for numeric columns</span>
<span class="n">corr_matrix</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="p">[</span><span class="n">numeric_cols</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="c1"># Create a mask to hide the upper triangle of the heatmap for better readability</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">corr_matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">))</span>

<span class="c1"># Plot the heatmap of the correlation matrix</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>  <span class="c1"># Set the figure size for better visualization</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span>
    <span class="n">corr_matrix</span><span class="p">,</span>  <span class="c1"># Correlation matrix as input</span>
    <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span>  <span class="c1"># Apply the mask to hide the upper triangle</span>
    <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Annotate the heatmap with correlation values</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span>  <span class="c1"># Use a diverging colormap for better contrast</span>
    <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">,</span>  <span class="c1"># Format the annotations to 2 decimal places</span>
    <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.5</span>  <span class="c1"># Add lines between cells for clarity</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Correlation Matrix Heatmap&quot;</span><span class="p">)</span>  <span class="c1"># Add a title for context</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Display the heatmap</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/c04ba642743a34e7b037c83265822f7efe9dd9530ecfe8d94a497654cdbee56f.png" src="../_images/c04ba642743a34e7b037c83265822f7efe9dd9530ecfe8d94a497654cdbee56f.png" />
</div>
</div>
<section id="analisis-de-correlacion-entre-variables-climaticas">
<h3><strong>Análisis de Correlación entre Variables Climáticas</strong><a class="headerlink" href="#analisis-de-correlacion-entre-variables-climaticas" title="Permalink to this heading">#</a></h3>
<p>La matriz de correlación permite identificar relaciones lineales entre variables climáticas registradas. A continuación, se resumen los hallazgos más relevantes:</p>
<hr class="docutils" />
<section id="relaciones-fuertemente-positivas">
<h4>1. Relaciones fuertemente positivas<a class="headerlink" href="#relaciones-fuertemente-positivas" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>ALLSKY_SFC_UV_INDEX y T2M</strong> (0.76):<br />
Existe una fuerte correlación positiva entre la temperatura del aire a 2 metros y el índice UV en superficie, lo cual es coherente con condiciones tropicales donde una mayor radiación directa incrementa la temperatura ambiental.</p></li>
<li><p><strong>T2MWET y T2M</strong> (0.75):<br />
La temperatura de bulbo húmedo está fuertemente ligada a la temperatura ambiente, como es esperado por su definición física.</p></li>
<li><p><strong>WS10M y WS50M</strong> (0.99):<br />
Estas dos variables presentan una correlación casi perfecta. Se recomienda utilizar solo una de ellas para evitar redundancia en modelos.</p></li>
<li><p><strong>ALLSKY_SRF_ALB y ALLSKY_SFC_SW_DIFF</strong> (0.59):<br />
El albedo superficial guarda relación con la irradiancia difusa, probablemente debido al efecto combinado de reflexión y dispersión de la radiación solar.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="relaciones-fuertemente-negativas">
<h4>2. Relaciones fuertemente negativas<a class="headerlink" href="#relaciones-fuertemente-negativas" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>RH2M y T2M</strong> (-0.90):<br />
Correlación negativa muy alta entre humedad relativa y temperatura. A mayor temperatura, la humedad relativa tiende a disminuir si no hay aporte de vapor de agua.</p></li>
<li><p><strong>RH2M y WS10M / WD10M</strong> (-0.50 a -0.45):<br />
Muestran que altos niveles de humedad están asociados con menor ventilación, posiblemente por condiciones atmosféricas más estables.</p></li>
<li><p><strong>ALLSKY_SFC_SW_DIFF y T2MWET</strong> (-0.55):<br />
La irradiancia difusa decrece en condiciones de alta humedad, representadas por la temperatura de bulbo húmedo.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="correlaciones-moderadas-a-bajas">
<h4>3. Correlaciones moderadas a bajas<a class="headerlink" href="#correlaciones-moderadas-a-bajas" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>ALLSKY_KT con variables solares/atmosféricas</strong>:</p>
<ul>
<li><p>Con <code class="docutils literal notranslate"><span class="pre">T2M</span></code> (0.52), <code class="docutils literal notranslate"><span class="pre">UV_INDEX</span></code> (0.19): el índice de claridad influye en la radiación pero no es el único factor.</p></li>
<li><p>Con <code class="docutils literal notranslate"><span class="pre">RH2M</span></code> (-0.24), <code class="docutils literal notranslate"><span class="pre">WS50M</span></code> (-0.50): puede reflejar condiciones más turbias o nubladas.</p></li>
</ul>
</li>
<li><p><strong>ALLSKY_SRF_ALB con otras variables</strong>:<br />
Correlaciones moderadas con presión superficial, humedad y UV sugieren sensibilidad del albedo a condiciones locales.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="conclusiones">
<h4>Conclusiones<a class="headerlink" href="#conclusiones" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Variables como <code class="docutils literal notranslate"><span class="pre">T2M</span></code>, <code class="docutils literal notranslate"><span class="pre">T2MWET</span></code> y <code class="docutils literal notranslate"><span class="pre">T2MDEW</span></code> presentan multicolinealidad. Se recomienda realizar selección de variables o aplicar reducción de dimensionalidad (por ejemplo, PCA).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WS10M</span></code> y <code class="docutils literal notranslate"><span class="pre">WS50M</span></code> son redundantes. Puede seleccionarse solo una para análisis o modelado.</p></li>
<li><p>La matriz de correlación confirma la relación esperada entre radiación, temperatura y humedad, y respalda la construcción de índices como <code class="docutils literal notranslate"><span class="pre">SolarIndex</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a heatmap to visualize missing values in the DataFrame</span>
<span class="c1"># This helps identify patterns or clusters of missing data across variables</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># Set the figure size for better readability</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df_cleaned</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">yticklabels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Use a colormap for visual clarity</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Mapa de Datos Faltantes&quot;</span><span class="p">)</span>  <span class="c1"># Add a title for context</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Display the heatmap</span>

<span class="c1"># Plot the percentage of missing values for each column</span>
<span class="c1"># This provides a quantitative view of missing data for each variable</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Set the figure size for better visualization</span>
<span class="n">missing_per_col</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;crimson&quot;</span><span class="p">)</span>  <span class="c1"># Use a bar plot with a distinct color for emphasis</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;50%&quot;</span><span class="p">)</span>  <span class="c1"># Add a reference line at 50% for context</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Variables&quot;</span><span class="p">)</span>  <span class="c1"># Label the x-axis for clarity</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">% d</span><span class="s2">e Datos Faltantes&quot;</span><span class="p">)</span>  <span class="c1"># Label the y-axis for clarity</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Porcentaje de Datos Faltantes por Variable&quot;</span><span class="p">)</span>  <span class="c1"># Add a title for context</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>  <span class="c1"># Add a legend to explain the reference line</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Display the bar plot</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/e917a01e36d71dc1c65b902a0fe1ebf4dfb05134eff6c9109c9325947d79b864.png" src="../_images/e917a01e36d71dc1c65b902a0fe1ebf4dfb05134eff6c9109c9325947d79b864.png" />
<img alt="../_images/7067b786101f4eba03aa79b83b333d22118dea68e2950bc474fc95a77e8fe4a7.png" src="../_images/7067b786101f4eba03aa79b83b333d22118dea68e2950bc474fc95a77e8fe4a7.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select numeric columns for outlier analysis</span>
<span class="c1"># This ensures that only numerical data is included in the boxplot visualization,</span>
<span class="c1"># avoiding errors or irrelevant results caused by non-numeric data.</span>
<span class="n">numeric_cols</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>

<span class="c1"># Create a boxplot for each numeric column to visualize potential outliers</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>  <span class="c1"># Set the figure size for better readability</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">numeric_cols</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># Enumerate through numeric columns for plotting</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>  <span class="c1"># Create a subplot grid (4 rows, 5 columns)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_cleaned</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>  <span class="c1"># Generate a boxplot for the current column</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Boxplot de </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Add a title to each subplot for context</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  <span class="c1"># Adjust subplot spacing to prevent overlap</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Display the boxplots</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/f8c5784ff38e7158405551f954d4ab1b6b3e4b4d5e28afc07ee444a600fc03e2.png" src="../_images/f8c5784ff38e7158405551f954d4ab1b6b3e4b4d5e28afc07ee444a600fc03e2.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the first few rows of the cleaned DataFrame</span>
<span class="c1"># This is useful for quickly inspecting the structure, column names, and sample data of the cleaned dataset.</span>
<span class="n">df_cleaned</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>YEAR</th>
      <th>MO</th>
      <th>DY</th>
      <th>HR</th>
      <th>T2M</th>
      <th>PRECTOTCORR</th>
      <th>RH2M</th>
      <th>WS10M</th>
      <th>WD10M</th>
      <th>PS</th>
      <th>ALLSKY_SFC_UV_INDEX</th>
      <th>ALLSKY_SRF_ALB</th>
      <th>ALLSKY_SFC_SW_DIFF</th>
      <th>T2MDEW</th>
      <th>T2MWET</th>
      <th>WS50M</th>
      <th>ALLSKY_KT</th>
      <th>LOCALITY</th>
      <th>NBHD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>26.66</td>
      <td>0.03</td>
      <td>86.19</td>
      <td>7.87</td>
      <td>40.0</td>
      <td>100.66</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>24.19</td>
      <td>25.42</td>
      <td>10.13</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>26.56</td>
      <td>0.03</td>
      <td>85.81</td>
      <td>8.02</td>
      <td>41.8</td>
      <td>100.58</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>24.01</td>
      <td>25.29</td>
      <td>10.31</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>26.43</td>
      <td>0.02</td>
      <td>85.59</td>
      <td>8.05</td>
      <td>42.7</td>
      <td>100.52</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>23.84</td>
      <td>25.14</td>
      <td>10.33</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>26.35</td>
      <td>0.00</td>
      <td>84.96</td>
      <td>8.01</td>
      <td>43.7</td>
      <td>100.49</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>23.63</td>
      <td>24.99</td>
      <td>10.25</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>26.27</td>
      <td>0.00</td>
      <td>84.21</td>
      <td>7.88</td>
      <td>45.6</td>
      <td>100.49</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>23.42</td>
      <td>24.85</td>
      <td>10.08</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the summary statistics of the cleaned DataFrame</span>
<span class="c1"># Using the `round` function to limit the number of decimal places to 2 for better readability</span>
<span class="c1"># This provides a quick overview of the central tendency, dispersion, and shape of the dataset&#39;s distribution</span>
<span class="nb">round</span><span class="p">(</span><span class="n">df_cleaned</span><span class="o">.</span><span class="n">describe</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>YEAR</th>
      <th>MO</th>
      <th>DY</th>
      <th>HR</th>
      <th>T2M</th>
      <th>PRECTOTCORR</th>
      <th>RH2M</th>
      <th>WS10M</th>
      <th>WD10M</th>
      <th>PS</th>
      <th>ALLSKY_SFC_UV_INDEX</th>
      <th>ALLSKY_SRF_ALB</th>
      <th>ALLSKY_SFC_SW_DIFF</th>
      <th>T2MDEW</th>
      <th>T2MWET</th>
      <th>WS50M</th>
      <th>ALLSKY_KT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1405094.00</td>
      <td>1170479.00</td>
      <td>956110.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>721270.00</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2022.00</td>
      <td>6.52</td>
      <td>15.73</td>
      <td>11.50</td>
      <td>28.21</td>
      <td>53.68</td>
      <td>29.63</td>
      <td>5.29</td>
      <td>66.46</td>
      <td>100.55</td>
      <td>2.38</td>
      <td>72.09</td>
      <td>45.04</td>
      <td>24.25</td>
      <td>26.23</td>
      <td>6.64</td>
      <td>0.51</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.42</td>
      <td>3.45</td>
      <td>8.81</td>
      <td>6.92</td>
      <td>1.82</td>
      <td>37.99</td>
      <td>38.15</td>
      <td>2.21</td>
      <td>76.95</td>
      <td>0.17</td>
      <td>3.74</td>
      <td>110.75</td>
      <td>93.78</td>
      <td>1.54</td>
      <td>1.17</td>
      <td>2.84</td>
      <td>0.17</td>
    </tr>
    <tr>
      <th>min</th>
      <td>2020.00</td>
      <td>1.00</td>
      <td>1.00</td>
      <td>0.00</td>
      <td>22.88</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.04</td>
      <td>0.00</td>
      <td>99.97</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>17.85</td>
      <td>22.05</td>
      <td>0.04</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2021.00</td>
      <td>4.00</td>
      <td>8.00</td>
      <td>6.00</td>
      <td>26.91</td>
      <td>2.60</td>
      <td>0.09</td>
      <td>3.56</td>
      <td>30.30</td>
      <td>100.43</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.02</td>
      <td>23.19</td>
      <td>25.44</td>
      <td>4.44</td>
      <td>0.38</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2022.00</td>
      <td>7.00</td>
      <td>16.00</td>
      <td>12.00</td>
      <td>27.93</td>
      <td>71.73</td>
      <td>3.13</td>
      <td>5.41</td>
      <td>42.00</td>
      <td>100.54</td>
      <td>0.00</td>
      <td>0.15</td>
      <td>0.13</td>
      <td>24.43</td>
      <td>26.33</td>
      <td>6.73</td>
      <td>0.55</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2023.00</td>
      <td>10.00</td>
      <td>23.00</td>
      <td>17.50</td>
      <td>29.46</td>
      <td>86.14</td>
      <td>73.71</td>
      <td>6.97</td>
      <td>57.20</td>
      <td>100.66</td>
      <td>3.95</td>
      <td>139.15</td>
      <td>11.10</td>
      <td>25.43</td>
      <td>27.08</td>
      <td>8.79</td>
      <td>0.65</td>
    </tr>
    <tr>
      <th>max</th>
      <td>2025.00</td>
      <td>12.00</td>
      <td>31.00</td>
      <td>23.00</td>
      <td>35.36</td>
      <td>684.23</td>
      <td>684.23</td>
      <td>11.72</td>
      <td>359.80</td>
      <td>101.27</td>
      <td>17.52</td>
      <td>585.10</td>
      <td>525.32</td>
      <td>27.97</td>
      <td>29.61</td>
      <td>15.15</td>
      <td>0.78</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a copy of the cleaned DataFrame to apply logical limits</span>
<span class="n">df_cleaned_limits</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Define logical limits for each variable</span>
<span class="c1"># These limits are based on domain knowledge to ensure data consistency and validity</span>
<span class="n">limits</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;YEAR&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">2025</span><span class="p">},</span>  <span class="c1"># Valid range for years</span>
    <span class="s1">&#39;MO&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>        <span class="c1"># Months should be between 1 and 12</span>
    <span class="s1">&#39;DY&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">31</span><span class="p">},</span>        <span class="c1"># Days should be between 1 and 31</span>
    <span class="s1">&#39;HR&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">},</span>        <span class="c1"># Hours should be between 0 and 23</span>
    <span class="s1">&#39;T2M&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">},</span>     <span class="c1"># Temperature range in Celsius</span>
    <span class="s1">&#39;RH2M&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>     <span class="c1"># Relative humidity in percentage</span>
    <span class="s1">&#39;PRECTOTCORR&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">},</span>  <span class="c1"># Precipitation in mm/hour</span>
    <span class="s1">&#39;WS10M&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">80</span><span class="p">},</span>     <span class="c1"># Wind speed at 10m in m/s</span>
    <span class="s1">&#39;WD10M&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">360</span><span class="p">},</span>    <span class="c1"># Wind direction in degrees</span>
    <span class="s1">&#39;PS&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">110</span><span class="p">},</span>      <span class="c1"># Surface pressure in kPa</span>
    <span class="s1">&#39;ALLSKY_SFC_UV_INDEX&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">},</span>  <span class="c1"># UV index</span>
    <span class="s1">&#39;ALLSKY_SFC_SW_DIFF&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">1500</span><span class="p">},</span> <span class="c1"># Diffuse solar radiation in Wh/m²</span>
    <span class="s1">&#39;ALLSKY_SRF_ALB&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>        <span class="c1"># Surface albedo (dimensionless)</span>
    <span class="s1">&#39;T2MDEW&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">35</span><span class="p">},</span>  <span class="c1"># Dew point temperature in Celsius</span>
    <span class="s1">&#39;T2MWET&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">35</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">35</span><span class="p">},</span>  <span class="c1"># Wet-bulb temperature in Celsius</span>
    <span class="s1">&#39;WS50M&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">75</span><span class="p">},</span>     <span class="c1"># Wind speed at 50m in m/s</span>
    <span class="s1">&#39;ALLSKY_KT&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>  <span class="c1"># Clearness index (dimensionless)</span>
<span class="p">}</span>

<span class="c1"># Apply the defined limits to each column in the DataFrame</span>
<span class="c1"># Replace values outside the defined range with NaN to indicate invalid data</span>
<span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">lim</span> <span class="ow">in</span> <span class="n">limits</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">lim</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">lim</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="n">x</span>
    <span class="p">)</span>

<span class="c1"># Display the first few rows of the DataFrame to verify the applied limits</span>
<span class="c1"># This step ensures that the data cleaning process was successful</span>
<span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>YEAR</th>
      <th>MO</th>
      <th>DY</th>
      <th>HR</th>
      <th>T2M</th>
      <th>PRECTOTCORR</th>
      <th>RH2M</th>
      <th>WS10M</th>
      <th>WD10M</th>
      <th>PS</th>
      <th>ALLSKY_SFC_UV_INDEX</th>
      <th>ALLSKY_SRF_ALB</th>
      <th>ALLSKY_SFC_SW_DIFF</th>
      <th>T2MDEW</th>
      <th>T2MWET</th>
      <th>WS50M</th>
      <th>ALLSKY_KT</th>
      <th>LOCALITY</th>
      <th>NBHD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>26.66</td>
      <td>0.03</td>
      <td>86.19</td>
      <td>7.87</td>
      <td>40.0</td>
      <td>100.66</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>24.19</td>
      <td>25.42</td>
      <td>10.13</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>26.56</td>
      <td>0.03</td>
      <td>85.81</td>
      <td>8.02</td>
      <td>41.8</td>
      <td>100.58</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>24.01</td>
      <td>25.29</td>
      <td>10.31</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>26.43</td>
      <td>0.02</td>
      <td>85.59</td>
      <td>8.05</td>
      <td>42.7</td>
      <td>100.52</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>23.84</td>
      <td>25.14</td>
      <td>10.33</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>26.35</td>
      <td>0.00</td>
      <td>84.96</td>
      <td>8.01</td>
      <td>43.7</td>
      <td>100.49</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>23.63</td>
      <td>24.99</td>
      <td>10.25</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>26.27</td>
      <td>0.00</td>
      <td>84.21</td>
      <td>7.88</td>
      <td>45.6</td>
      <td>100.49</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>23.42</td>
      <td>24.85</td>
      <td>10.08</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Una vez aplicado el filtrado por límites lógicos a cada variable del dataset, se procede al cálculo de las variables objetivo a partir de los datos preexistentes. Estas nuevas variables derivadas permitirán abordar los análisis y modelos posteriores con una base de datos consistente y depurada.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculate the maximum value of the UV index for normalization</span>
<span class="c1"># This step ensures that the UV index is scaled between 0 and 1 for consistent calculations</span>
<span class="n">uv_max</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;ALLSKY_SFC_UV_INDEX&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="c1"># Create a new column &#39;SolarIndex&#39; using a formula that combines multiple variables</span>
<span class="c1"># - Convert ALLSKY_SFC_SW_DIFF from Wh/m² to kWh/m² by dividing by 1000</span>
<span class="c1"># - Normalize ALLSKY_SFC_UV_INDEX by dividing by its maximum value (uv_max)</span>
<span class="c1"># This composite index represents the solar energy potential at each data point</span>
<span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;SolarIndex&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;ALLSKY_SFC_SW_DIFF&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">*</span>  <span class="c1"># Wh/m² → kWh/m²</span>
    <span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;ALLSKY_SFC_UV_INDEX&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">uv_max</span><span class="p">)</span> <span class="c1"># Normalizar UV</span>
<span class="p">)</span>

<span class="c1"># Display the first few rows of the updated DataFrame to verify the new column</span>
<span class="c1"># This step helps ensure that the &#39;SolarIndex&#39; column was created correctly</span>
<span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>


<span class="c1"># Does not include ALLSKY_KT, therefore:</span>
<span class="c1"># - Does not penalize for turbid atmospheric conditions.</span>
<span class="c1"># - Assumes an &quot;ideal&quot; or average atmosphere for all cases.</span>
<span class="c1"># Additionally, ALLSKY_KT is not used because it has more than 50% missing data.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>YEAR</th>
      <th>MO</th>
      <th>DY</th>
      <th>HR</th>
      <th>T2M</th>
      <th>PRECTOTCORR</th>
      <th>RH2M</th>
      <th>WS10M</th>
      <th>WD10M</th>
      <th>PS</th>
      <th>ALLSKY_SFC_UV_INDEX</th>
      <th>ALLSKY_SRF_ALB</th>
      <th>ALLSKY_SFC_SW_DIFF</th>
      <th>T2MDEW</th>
      <th>T2MWET</th>
      <th>WS50M</th>
      <th>ALLSKY_KT</th>
      <th>LOCALITY</th>
      <th>NBHD</th>
      <th>SolarIndex</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>26.66</td>
      <td>0.03</td>
      <td>86.19</td>
      <td>7.87</td>
      <td>40.0</td>
      <td>100.66</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>24.19</td>
      <td>25.42</td>
      <td>10.13</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>26.56</td>
      <td>0.03</td>
      <td>85.81</td>
      <td>8.02</td>
      <td>41.8</td>
      <td>100.58</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>24.01</td>
      <td>25.29</td>
      <td>10.31</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>26.43</td>
      <td>0.02</td>
      <td>85.59</td>
      <td>8.05</td>
      <td>42.7</td>
      <td>100.52</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>23.84</td>
      <td>25.14</td>
      <td>10.33</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>26.35</td>
      <td>0.00</td>
      <td>84.96</td>
      <td>8.01</td>
      <td>43.7</td>
      <td>100.49</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>23.63</td>
      <td>24.99</td>
      <td>10.25</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>26.27</td>
      <td>0.00</td>
      <td>84.21</td>
      <td>7.88</td>
      <td>45.6</td>
      <td>100.49</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>23.42</td>
      <td>24.85</td>
      <td>10.08</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>26.20</td>
      <td>0.00</td>
      <td>83.65</td>
      <td>7.80</td>
      <td>48.5</td>
      <td>100.51</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>23.23</td>
      <td>24.71</td>
      <td>10.02</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>26.22</td>
      <td>0.00</td>
      <td>83.05</td>
      <td>7.58</td>
      <td>51.6</td>
      <td>100.58</td>
      <td>0.03</td>
      <td>0.14</td>
      <td>22.18</td>
      <td>23.14</td>
      <td>24.68</td>
      <td>9.65</td>
      <td>0.27</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000044</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>7</td>
      <td>26.85</td>
      <td>0.00</td>
      <td>79.78</td>
      <td>7.18</td>
      <td>53.7</td>
      <td>100.68</td>
      <td>0.43</td>
      <td>0.15</td>
      <td>128.03</td>
      <td>23.08</td>
      <td>24.96</td>
      <td>8.88</td>
      <td>0.45</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.003670</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>8</td>
      <td>28.00</td>
      <td>0.00</td>
      <td>72.01</td>
      <td>6.97</td>
      <td>55.7</td>
      <td>100.76</td>
      <td>1.92</td>
      <td>0.14</td>
      <td>192.92</td>
      <td>22.49</td>
      <td>25.24</td>
      <td>8.54</td>
      <td>0.55</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.024694</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>9</td>
      <td>29.11</td>
      <td>0.00</td>
      <td>65.72</td>
      <td>6.34</td>
      <td>56.3</td>
      <td>100.78</td>
      <td>4.50</td>
      <td>0.14</td>
      <td>219.85</td>
      <td>22.02</td>
      <td>25.57</td>
      <td>7.69</td>
      <td>0.63</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.065955</td>
    </tr>
    <tr>
      <th>10</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>10</td>
      <td>29.97</td>
      <td>0.00</td>
      <td>61.85</td>
      <td>5.69</td>
      <td>53.2</td>
      <td>100.75</td>
      <td>7.15</td>
      <td>0.14</td>
      <td>222.55</td>
      <td>21.83</td>
      <td>25.90</td>
      <td>6.81</td>
      <td>0.69</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.106082</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>11</td>
      <td>30.64</td>
      <td>0.00</td>
      <td>58.83</td>
      <td>5.26</td>
      <td>46.4</td>
      <td>100.67</td>
      <td>8.20</td>
      <td>0.12</td>
      <td>270.23</td>
      <td>21.64</td>
      <td>26.14</td>
      <td>6.18</td>
      <td>0.66</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.147726</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>12</td>
      <td>31.00</td>
      <td>0.00</td>
      <td>57.10</td>
      <td>5.16</td>
      <td>37.0</td>
      <td>100.54</td>
      <td>8.15</td>
      <td>0.10</td>
      <td>300.61</td>
      <td>21.49</td>
      <td>26.24</td>
      <td>5.98</td>
      <td>0.65</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.163331</td>
    </tr>
    <tr>
      <th>13</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>13</td>
      <td>30.96</td>
      <td>0.00</td>
      <td>57.24</td>
      <td>5.41</td>
      <td>28.4</td>
      <td>100.43</td>
      <td>6.55</td>
      <td>0.07</td>
      <td>217.03</td>
      <td>21.50</td>
      <td>26.23</td>
      <td>6.28</td>
      <td>0.59</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.094770</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>14</td>
      <td>30.56</td>
      <td>0.00</td>
      <td>58.98</td>
      <td>5.86</td>
      <td>23.6</td>
      <td>100.35</td>
      <td>4.32</td>
      <td>0.06</td>
      <td>226.01</td>
      <td>21.60</td>
      <td>26.08</td>
      <td>6.92</td>
      <td>0.58</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.065091</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>15</td>
      <td>29.91</td>
      <td>0.00</td>
      <td>61.85</td>
      <td>6.24</td>
      <td>22.4</td>
      <td>100.34</td>
      <td>1.92</td>
      <td>0.05</td>
      <td>169.04</td>
      <td>21.77</td>
      <td>25.84</td>
      <td>7.57</td>
      <td>0.53</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.021637</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>16</td>
      <td>28.96</td>
      <td>0.00</td>
      <td>66.58</td>
      <td>6.58</td>
      <td>22.7</td>
      <td>100.37</td>
      <td>0.47</td>
      <td>0.15</td>
      <td>123.97</td>
      <td>22.10</td>
      <td>25.53</td>
      <td>8.24</td>
      <td>0.48</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.003884</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>17</td>
      <td>27.80</td>
      <td>0.00</td>
      <td>73.41</td>
      <td>6.62</td>
      <td>23.8</td>
      <td>100.42</td>
      <td>0.03</td>
      <td>0.14</td>
      <td>24.71</td>
      <td>22.60</td>
      <td>25.20</td>
      <td>8.45</td>
      <td>0.27</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000049</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>18</td>
      <td>27.12</td>
      <td>0.00</td>
      <td>78.66</td>
      <td>6.66</td>
      <td>24.6</td>
      <td>100.50</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>23.09</td>
      <td>25.11</td>
      <td>8.61</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>19</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>19</td>
      <td>26.89</td>
      <td>0.00</td>
      <td>81.53</td>
      <td>6.75</td>
      <td>26.2</td>
      <td>100.58</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>23.48</td>
      <td>25.18</td>
      <td>8.72</td>
      <td>NaN</td>
      <td>Centro</td>
      <td>BarrioAbajo</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculate the maximum values for temperature (T2M) and wind speed (WS10M)</span>
<span class="c1"># These values will be used to normalize the respective variables</span>
<span class="n">t_max</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;T2M&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">ws_max</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;WS10M&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="c1"># Create a new column &#39;ICU_Index&#39; to represent the Urban Heat Island (UHI) effect</span>
<span class="c1"># The formula combines normalized temperature, relative humidity, and wind speed</span>
<span class="c1"># Higher temperature and humidity increase the index, while higher wind speed decreases it</span>
<span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;ICU_Index&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;T2M&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">t_max</span><span class="p">)</span> <span class="o">+</span>  <span class="c1"># Normalize temperature by dividing by its maximum value</span>
    <span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;RH2M&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">-</span>   <span class="c1"># Normalize relative humidity (percentage) by dividing by 100</span>
    <span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;WS10M&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">ws_max</span><span class="p">)</span> <span class="c1"># Normalize wind speed by dividing by its maximum value</span>
<span class="p">)</span>

<span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;ICU_Index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    1.533288e+06
mean     6.400144e-01
std      4.322587e-01
min     -2.527840e-01
25%      2.837838e-01
50%      5.578153e-01
75%      1.002827e+00
max      1.738198e+00
Name: ICU_Index, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;ICU_Index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: &gt;
</pre></div>
</div>
<img alt="../_images/9243851c8f92e061c03e7e9e36eeea5a64f6a00ea8558e6452569e8ddb36ee75.png" src="../_images/9243851c8f92e061c03e7e9e36eeea5a64f6a00ea8558e6452569e8ddb36ee75.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define bins and labels for categorizing the ICU_Index into meaningful categories</span>
<span class="c1"># Bins represent ranges of ICU_Index values, and labels describe the severity of the UHI effect</span>
<span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mf">0.28</span><span class="p">,</span> <span class="mf">0.56</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>  <span class="c1"># Define the ranges for categorization</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Sin efecto de isla de calor&quot;</span><span class="p">,</span>  <span class="c1"># No UHI effect</span>
    <span class="s2">&quot;Isla de calor leve&quot;</span><span class="p">,</span>           <span class="c1"># Mild UHI effect</span>
    <span class="s2">&quot;Isla de calor moderada&quot;</span><span class="p">,</span>       <span class="c1"># Moderate UHI effect</span>
    <span class="s2">&quot;Isla de calor intensa&quot;</span>         <span class="c1"># Intense UHI effect</span>
<span class="p">]</span>

<span class="c1"># Create a new column &#39;ICU_Categoria&#39; to categorize the ICU_Index based on the defined bins and labels</span>
<span class="c1"># Use the pd.cut() function to assign each row to a category</span>
<span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;ICU_Categoria&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s2">&quot;ICU_Index&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the data types of each column in the DataFrame</span>
<span class="c1"># This is useful for understanding the structure of the dataset,</span>
<span class="c1"># ensuring that the data types are as expected, and identifying</span>
<span class="c1"># any potential issues (e.g., numeric columns stored as objects).</span>
<span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>YEAR                      int64
MO                        int64
DY                        int64
HR                        int64
T2M                     float64
PRECTOTCORR             float64
RH2M                    float64
WS10M                   float64
WD10M                   float64
PS                      float64
ALLSKY_SFC_UV_INDEX     float64
ALLSKY_SRF_ALB          float64
ALLSKY_SFC_SW_DIFF      float64
T2MDEW                  float64
T2MWET                  float64
WS50M                   float64
ALLSKY_KT               float64
LOCALITY                 object
NBHD                     object
SolarIndex              float64
ICU_Index               float64
ICU_Categoria          category
dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the summary statistics of the DataFrame with limits applied</span>
<span class="c1"># Using the `round` function to limit the number of decimal places to 2 for better readability</span>
<span class="c1"># This provides a quick overview of the central tendency, dispersion, and shape of the dataset&#39;s distribution</span>
<span class="nb">round</span><span class="p">(</span><span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">describe</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>YEAR</th>
      <th>MO</th>
      <th>DY</th>
      <th>HR</th>
      <th>T2M</th>
      <th>PRECTOTCORR</th>
      <th>RH2M</th>
      <th>WS10M</th>
      <th>WD10M</th>
      <th>PS</th>
      <th>ALLSKY_SFC_UV_INDEX</th>
      <th>ALLSKY_SRF_ALB</th>
      <th>ALLSKY_SFC_SW_DIFF</th>
      <th>T2MDEW</th>
      <th>T2MWET</th>
      <th>WS50M</th>
      <th>ALLSKY_KT</th>
      <th>SolarIndex</th>
      <th>ICU_Index</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535387.00</td>
      <td>1533288.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1401749.00</td>
      <td>696538.00</td>
      <td>956110.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>1535519.00</td>
      <td>721270.00</td>
      <td>952540.00</td>
      <td>1533288.00</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2022.00</td>
      <td>6.52</td>
      <td>15.73</td>
      <td>11.50</td>
      <td>28.21</td>
      <td>53.65</td>
      <td>29.41</td>
      <td>5.29</td>
      <td>66.46</td>
      <td>100.55</td>
      <td>2.35</td>
      <td>0.05</td>
      <td>45.04</td>
      <td>24.25</td>
      <td>26.23</td>
      <td>6.64</td>
      <td>0.51</td>
      <td>0.02</td>
      <td>0.64</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.42</td>
      <td>3.45</td>
      <td>8.81</td>
      <td>6.92</td>
      <td>1.82</td>
      <td>37.82</td>
      <td>37.51</td>
      <td>2.21</td>
      <td>76.95</td>
      <td>0.17</td>
      <td>3.69</td>
      <td>0.07</td>
      <td>93.78</td>
      <td>1.54</td>
      <td>1.17</td>
      <td>2.84</td>
      <td>0.17</td>
      <td>0.05</td>
      <td>0.43</td>
    </tr>
    <tr>
      <th>min</th>
      <td>2020.00</td>
      <td>1.00</td>
      <td>1.00</td>
      <td>0.00</td>
      <td>22.88</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.04</td>
      <td>0.00</td>
      <td>99.97</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>17.85</td>
      <td>22.05</td>
      <td>0.04</td>
      <td>0.01</td>
      <td>0.00</td>
      <td>-0.25</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2021.00</td>
      <td>4.00</td>
      <td>8.00</td>
      <td>6.00</td>
      <td>26.91</td>
      <td>2.60</td>
      <td>0.09</td>
      <td>3.56</td>
      <td>30.30</td>
      <td>100.43</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.02</td>
      <td>23.19</td>
      <td>25.44</td>
      <td>4.44</td>
      <td>0.38</td>
      <td>0.00</td>
      <td>0.28</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2022.00</td>
      <td>7.00</td>
      <td>16.00</td>
      <td>12.00</td>
      <td>27.93</td>
      <td>71.73</td>
      <td>3.12</td>
      <td>5.41</td>
      <td>42.00</td>
      <td>100.54</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.13</td>
      <td>24.43</td>
      <td>26.33</td>
      <td>6.73</td>
      <td>0.55</td>
      <td>0.00</td>
      <td>0.56</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2023.00</td>
      <td>10.00</td>
      <td>23.00</td>
      <td>17.50</td>
      <td>29.46</td>
      <td>86.14</td>
      <td>73.53</td>
      <td>6.97</td>
      <td>57.20</td>
      <td>100.66</td>
      <td>3.88</td>
      <td>0.14</td>
      <td>11.10</td>
      <td>25.43</td>
      <td>27.08</td>
      <td>8.79</td>
      <td>0.65</td>
      <td>0.00</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>max</th>
      <td>2025.00</td>
      <td>12.00</td>
      <td>31.00</td>
      <td>23.00</td>
      <td>35.36</td>
      <td>295.23</td>
      <td>99.91</td>
      <td>11.72</td>
      <td>359.80</td>
      <td>101.27</td>
      <td>15.00</td>
      <td>0.99</td>
      <td>525.32</td>
      <td>27.97</td>
      <td>29.61</td>
      <td>15.15</td>
      <td>0.78</td>
      <td>0.43</td>
      <td>1.74</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the percentage and count of missing data for each column</span>
<span class="c1"># Using a lambda function to calculate the percentage of missing values</span>
<span class="c1"># and format the output to include both percentage and count for better clarity</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Porcentaje y cantidad de datos faltantes por columna:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">% (</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">)&quot;</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Porcentaje y cantidad de datos faltantes por columna:

YEAR                         0.00% (0)
MO                           0.00% (0)
DY                           0.00% (0)
HR                           0.00% (0)
T2M                          0.00% (0)
PRECTOTCORR                0.01% (132)
RH2M                      0.15% (2231)
WS10M                        0.00% (0)
WD10M                        0.00% (0)
PS                           0.00% (0)
ALLSKY_SFC_UV_INDEX     8.71% (133770)
ALLSKY_SRF_ALB         54.64% (838981)
ALLSKY_SFC_SW_DIFF     37.73% (579409)
T2MDEW                       0.00% (0)
T2MWET                       0.00% (0)
WS50M                        0.00% (0)
ALLSKY_KT              53.03% (814249)
LOCALITY                     0.00% (0)
NBHD                         0.00% (0)
SolarIndex             37.97% (582979)
ICU_Index                 0.15% (2231)
ICU_Categoria             0.15% (2231)
dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a heatmap to visualize missing values in the DataFrame</span>
<span class="c1"># This helps identify patterns or clusters of missing data across variables</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># Set the figure size for better readability</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">yticklabels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Use a colormap for visual clarity</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Mapa de Datos Faltantes&quot;</span><span class="p">)</span>  <span class="c1"># Add a title for context</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Display the heatmap</span>

<span class="c1"># Plot the percentage of missing values for each column</span>
<span class="c1"># This provides a quantitative view of missing data for each variable</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Set the figure size for better visualization</span>
<span class="n">missing_per_col</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;crimson&quot;</span><span class="p">)</span>  <span class="c1"># Use a bar plot with a distinct color for emphasis</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;50%&quot;</span><span class="p">)</span>  <span class="c1"># Add a reference line at 50% for context</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Variables&quot;</span><span class="p">)</span>  <span class="c1"># Label the x-axis for clarity</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">% d</span><span class="s2">e Datos Faltantes&quot;</span><span class="p">)</span>  <span class="c1"># Label the y-axis for clarity</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Porcentaje de Datos Faltantes por Variable&quot;</span><span class="p">)</span>  <span class="c1"># Add a title for context</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>  <span class="c1"># Add a legend to explain the reference line</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Display the bar plot</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/6fd55abe3f7e1b131a00bc2ce4ba2056741533f10aca8c90a8e14dbd34d7e1bf.png" src="../_images/6fd55abe3f7e1b131a00bc2ce4ba2056741533f10aca8c90a8e14dbd34d7e1bf.png" />
<img alt="../_images/7067b786101f4eba03aa79b83b333d22118dea68e2950bc474fc95a77e8fe4a7.png" src="../_images/7067b786101f4eba03aa79b83b333d22118dea68e2950bc474fc95a77e8fe4a7.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract unique localities from the &#39;LOCALITY&#39; column of the cleaned DataFrame</span>
<span class="c1"># This provides a list of distinct localities present in the dataset, which can be useful for further analysis or filtering</span>
<span class="n">localidades</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="c1"># Print the unique localities for verification and understanding of the dataset&#39;s geographical coverage</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Localidades únicas:&quot;</span><span class="p">,</span> <span class="n">localidades</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Localidades únicas: [&#39;Centro&#39; &#39;Sur&#39; &#39;Occidente&#39; &#39;Oriente&#39; &#39;Norte&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select categorical columns for analysis</span>
<span class="c1"># Using &#39;object&#39; dtype to identify text-based columns such as &#39;LOCALITY&#39; and &#39;NBHD&#39;</span>
<span class="n">categorical_cols</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>

<span class="c1"># Select numeric columns for analysis</span>
<span class="c1"># Using &#39;number&#39; dtype to identify columns with numerical data for statistical or mathematical operations</span>
<span class="n">numeric_cols</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Categorical columns:&quot;</span><span class="p">,</span> <span class="n">categorical_cols</span><span class="p">)</span>  <span class="c1"># Print the categorical columns for verification</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Categorical columns: Index([&#39;LOCALITY&#39;, &#39;NBHD&#39;], dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the figure size for better readability of the boxplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Iterate through each numeric column to create individual boxplots</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">numeric_cols</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># Enumerate to get both index and column name</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>  <span class="c1"># Create a subplot grid (4 rows, 5 columns)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>  <span class="c1"># Generate a boxplot for the current column</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Boxplot de </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Add a title to each subplot for context</span>

<span class="c1"># Adjust subplot spacing to prevent overlap and improve layout</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="c1"># Display all the boxplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/d32ca9caecea3399e532a464fc80255c99cedeb009f669b24df52dcb0c1ccf14.png" src="../_images/d32ca9caecea3399e532a464fc80255c99cedeb009f669b24df52dcb0c1ccf14.png" />
</div>
</div>
</section>
</section>
</section>
<section id="analisis-de-normalidad-y-distribucion-de-variables">
<h2><strong>Análisis de Normalidad y Distribución de Variables</strong><a class="headerlink" href="#analisis-de-normalidad-y-distribucion-de-variables" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Perform the Shapiro-Wilk test for normality on numeric columns</span>
<span class="c1"># Store the results (statistic and p-value) in a dictionary for better organization</span>
<span class="n">normality_results</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">numeric_cols</span><span class="p">:</span>
    <span class="c1"># Drop NaN values before performing the test to avoid errors</span>
    <span class="n">stat</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
    <span class="n">normality_results</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Statistic&#39;</span><span class="p">:</span> <span class="n">stat</span><span class="p">,</span> <span class="s1">&#39;p-value&#39;</span><span class="p">:</span> <span class="n">p_value</span><span class="p">}</span>

<span class="c1"># Convert the results dictionary into a DataFrame for better readability and analysis</span>
<span class="n">normality_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">normality_results</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shapiro-Wilk Test Results for Normality:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normality_df</span><span class="p">)</span>

<span class="c1"># Perform the Chi-squared test for independence on categorical columns</span>
<span class="c1"># Store the results (Chi-squared statistic, p-value, and degrees of freedom) in a dictionary</span>
<span class="n">chi2_results</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">categorical_cols</span><span class="p">:</span>
    <span class="c1"># Create a contingency table for the Chi-squared test</span>
    <span class="n">contingency_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">],</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>
    <span class="c1"># Perform the Chi-squared test</span>
    <span class="n">chi2</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">dof</span><span class="p">,</span> <span class="n">ex</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">contingency_table</span><span class="p">)</span>
    <span class="n">chi2_results</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Chi2&#39;</span><span class="p">:</span> <span class="n">chi2</span><span class="p">,</span> <span class="s1">&#39;p-value&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">,</span> <span class="s1">&#39;dof&#39;</span><span class="p">:</span> <span class="n">dof</span><span class="p">}</span>

<span class="c1"># Convert the results dictionary into a DataFrame for better readability and analysis</span>
<span class="n">chi2_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">chi2_results</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Chi-squared Test Results for Categorical Variables:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">chi2_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Users\jesus\miniconda3\envs\testml_env\lib\site-packages\scipy\stats\_morestats.py:1816: UserWarning: p-value may not be accurate for N &gt; 5000.
  warnings.warn(&quot;p-value may not be accurate for N &gt; 5000.&quot;)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Shapiro-Wilk Test Results for Normality:
                     Statistic  p-value
YEAR                  0.902474      0.0
MO                    0.943161      0.0
DY                    0.951996      0.0
HR                    0.945347      0.0
T2M                   0.982821      0.0
PRECTOTCORR           0.766861      0.0
RH2M                  0.704668      0.0
WS10M                 0.988252      0.0
WD10M                 0.572860      0.0
PS                    0.996135      0.0
ALLSKY_SFC_UV_INDEX   0.687594      0.0
ALLSKY_SRF_ALB        0.656792      0.0
ALLSKY_SFC_SW_DIFF    0.554192      0.0
T2MDEW                0.983023      0.0
T2MWET                0.991703      0.0
WS50M                 0.988792      0.0
ALLSKY_KT             0.940963      0.0
SolarIndex            0.430259      0.0
ICU_Index             0.954432      0.0

Chi-squared Test Results for Categorical Variables:
                  Chi2  p-value    dof
LOCALITY  6.142076e+06      0.0   16.0
NBHD      4.167836e+06      0.0  100.0
</pre></div>
</div>
</div>
</div>
<section id="prueba-de-normalidad-shapiro-wilk">
<h3><strong>Prueba de Normalidad (Shapiro-Wilk)</strong><a class="headerlink" href="#prueba-de-normalidad-shapiro-wilk" title="Permalink to this heading">#</a></h3>
<p>El test de normalidad de Shapiro-Wilk proporciona un valor estadístico y un <strong>p-valor</strong>. Si el <strong>p-valor</strong> es menor a 0.05, se rechaza la hipótesis nula de que la variable sigue una distribución normal. Este test es sensible para grandes volúmenes de datos; sin embargo, sigue siendo útil para detectar desviaciones significativas.</p>
<hr class="docutils" />
<section id="resultados-destacados">
<h4><strong>Resultados destacados</strong><a class="headerlink" href="#resultados-destacados" title="Permalink to this heading">#</a></h4>
</section>
<section id="variables-con-mejor-ajuste-relativo-a-la-normalidad">
<h4><strong>Variables con mejor ajuste relativo a la normalidad</strong><a class="headerlink" href="#variables-con-mejor-ajuste-relativo-a-la-normalidad" title="Permalink to this heading">#</a></h4>
<p>(Aunque todas las variables tienen p-valores de 0.0, algunas presentan estadísticas más cercanas a 1.0, lo que indica menor desviación de la normalidad):</p>
<ul class="simple">
<li><p><strong>PS</strong> (Presión superficial): estadístico = 0.996</p></li>
<li><p><strong>T2MWET</strong> (Temperatura húmeda a 2 metros): 0.992</p></li>
<li><p><strong>WS50M</strong> (Viento a 50 metros): 0.989</p></li>
<li><p><strong>WS10M</strong> (Viento a 10 metros): 0.988</p></li>
<li><p><strong>T2MDEW</strong> (Punto de rocío a 2 metros): 0.983</p></li>
<li><p><strong>T2M</strong> (Temperatura a 2 metros): 0.983</p></li>
<li><p><strong>ICU_Index</strong> (Índice de isla de calor): 0.954</p></li>
</ul>
<p>Estas variables muestran una leve desviación de la normalidad, aunque no cumplen el criterio estricto (p &lt; 0.05). Su distribución se aproxima más a la normal que las demás.</p>
</section>
<hr class="docutils" />
<section id="variables-que-presentan-mayor-desviacion-de-la-normalidad">
<h4><strong>Variables que presentan mayor desviación de la normalidad</strong><a class="headerlink" href="#variables-que-presentan-mayor-desviacion-de-la-normalidad" title="Permalink to this heading">#</a></h4>
<p>(Estadísticos muy alejados de 1.0):</p>
<ul class="simple">
<li><p><strong>ALLSKY_SFC_SW_DIFF</strong> (Irradiancia difusa): 0.554</p></li>
<li><p><strong>WD10M</strong> (Dirección del viento): 0.573</p></li>
<li><p><strong>ALLSKY_SRF_ALB</strong> (Albedo): 0.657</p></li>
<li><p><strong>ALLSKY_SFC_UV_INDEX</strong> (Índice UV): 0.688</p></li>
<li><p><strong>RH2M</strong> (Humedad relativa): 0.705</p></li>
<li><p><strong>PRECTOTCORR</strong> (Precipitación): 0.767</p></li>
<li><p><strong>SolarIndex</strong> (Índice de energía solar): 0.494</p></li>
</ul>
<p>Estas variables presentan una distribución altamente sesgada o multimodal, lo que indica una fuerte desviación respecto a la normalidad.</p>
</section>
<hr class="docutils" />
<section id="variables-temporales">
<h4><strong>Variables temporales</strong><a class="headerlink" href="#variables-temporales" title="Permalink to this heading">#</a></h4>
<p>(Todas tienen p-valores de 0.0 y estadísticos &lt; 0.96):</p>
<ul class="simple">
<li><p><strong>YEAR</strong>: 0.902</p></li>
<li><p><strong>MO</strong> (Mes): 0.943</p></li>
<li><p><strong>DY</strong> (Día): 0.952</p></li>
<li><p><strong>HR</strong> (Hora): 0.945</p></li>
</ul>
<p>Como era esperable, las variables temporales no siguen una distribución normal, ya que se distribuyen de manera discreta o estacional.</p>
</section>
<hr class="docutils" />
<section id="prueba-de-independencia-chi-cuadrado">
<h4><strong>Prueba de Independencia Chi-Cuadrado</strong><a class="headerlink" href="#prueba-de-independencia-chi-cuadrado" title="Permalink to this heading">#</a></h4>
<p>La prueba de Chi-cuadrado evalúa si existe independencia estadística entre variables categóricas. Se aplicó entre <code class="docutils literal notranslate"><span class="pre">LOCALITY</span></code>, <code class="docutils literal notranslate"><span class="pre">NBHD</span></code> y otras variables categóricas.</p>
<ul class="simple">
<li><p><strong>LOCALITY</strong></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(\chi^2 = 6,142,076\)</span>, <span class="math notranslate nohighlight">\(p = 0.0\)</span>, <span class="math notranslate nohighlight">\(df = 16\)</span></p></li>
<li><p>Resultado: distribución altamente no uniforme entre localidades.</p></li>
</ul>
</li>
<li><p><strong>NBHD</strong></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(\chi^2 = 4,167,836\)</span>, <span class="math notranslate nohighlight">\(p = 0.0\)</span>, <span class="math notranslate nohighlight">\(df = 100\)</span></p></li>
<li><p>Resultado: la distribución de registros entre barrios tampoco es homogénea.</p></li>
</ul>
</li>
</ul>
<p>Esto sugiere que existen patrones espaciales relevantes en los datos, donde ciertas localidades o barrios concentran mayor cantidad de observaciones.</p>
</section>
<hr class="docutils" />
<section id="id1">
<h4><strong>Conclusiones</strong><a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Ninguna variable numérica sigue una distribución normal según el test de Shapiro-Wilk.</p></li>
<li><p>Algunas variables (como presión y temperatura) se aproximan a la normalidad, mientras que otras muestran distribuciones claramente sesgadas.</p></li>
<li><p>Las variables categóricas <code class="docutils literal notranslate"><span class="pre">LOCALITY</span></code> y <code class="docutils literal notranslate"><span class="pre">NBHD</span></code> muestran distribuciones altamente no uniformes, lo que indica diferencias sustanciales entre zonas geográficas en el conjunto de datos.</p></li>
</ul>
<p>Debido a que ninguna variable es sigue una distribución normal, para las variables con NA´s se emplearán diferentes técnicas de amputación, empezaremos con ALLSKY_SFC_UV_INDEX, ya Que es la variable con menos porcentaje de datos nulos (aproximadamente 8.5% de NA’s), a la cual se le aplicará la imputación por la mediana.</p>
</section>
</section>
<section id="limpieza-final">
<h3><strong>Limpieza Final</strong><a class="headerlink" href="#limpieza-final" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_final</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Create a temporary copy for testing</span>

<span class="c1"># === 1. Remove columns with more than 50% missing values ===</span>
<span class="c1"># Good practice: Drop columns with excessive missing data to avoid bias or unreliable analysis</span>
<span class="n">cols_to_drop</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ALLSKY_SRF_ALB&#39;</span><span class="p">,</span> <span class="s1">&#39;ALLSKY_KT&#39;</span><span class="p">]</span>
<span class="n">df_final</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols_to_drop</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># === 2. Impute missing values with the global median for variables with few missing values ===</span>
<span class="c1"># Good practice: Use the median for imputation as it is robust to outliers</span>
<span class="c1"># PRECTOTCORR, RH2M, ICU_Index have less than 1% missing values</span>
<span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;PRECTOTCORR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;PRECTOTCORR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;RH2M&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;RH2M&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ICU_Index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ICU_Index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># === 3. Impute missing values by month for seasonally dependent variables ===</span>
<span class="c1"># Good practice: Group by a relevant categorical variable (e.g., month) to capture seasonal patterns</span>
<span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ALLSKY_SFC_UV_INDEX&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_final</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;MO&#39;</span><span class="p">)[</span><span class="s1">&#39;ALLSKY_SFC_UV_INDEX&#39;</span><span class="p">]</span>\
    <span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">median</span><span class="p">()))</span>

<span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ALLSKY_SFC_SW_DIFF&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_final</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;MO&#39;</span><span class="p">)[</span><span class="s1">&#39;ALLSKY_SFC_SW_DIFF&#39;</span><span class="p">]</span>\
    <span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">median</span><span class="p">()))</span>

<span class="c1"># === 4. Recalculate SolarIndex without ALLSKY_KT (already removed) ===</span>
<span class="c1"># Good practice: Ensure calculations are updated after dropping columns</span>
<span class="c1"># Use only SW_DIFF and normalized UV_INDEX</span>
<span class="n">uv_max</span> <span class="o">=</span> <span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ALLSKY_SFC_UV_INDEX&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;SolarIndex&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ALLSKY_SFC_SW_DIFF&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">*</span>  <span class="c1"># Convert Wh/m² → kWh/m²</span>
    <span class="p">(</span><span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ALLSKY_SFC_UV_INDEX&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">uv_max</span><span class="p">)</span>  <span class="c1"># Normalize UV</span>
<span class="p">)</span>

<span class="c1"># === 5. Recalculate ICU_Categoria based on ICU_Index ===</span>
<span class="c1"># Good practice: Use meaningful and interpretable categories for better analysis</span>
<span class="c1"># Custom categories based on actual percentiles</span>
<span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mf">0.28</span><span class="p">,</span> <span class="mf">0.56</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Sin efecto de isla de calor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Isla de calor leve&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Isla de calor moderada&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Isla de calor intensa&quot;</span>
<span class="p">]</span>

<span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ICU_Categoria&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span>
    <span class="n">df_final</span><span class="p">[</span><span class="s1">&#39;ICU_Index&#39;</span><span class="p">],</span>
    <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">labels</span>
<span class="p">)</span>

<span class="c1"># === 6. Final verification ===</span>
<span class="c1"># Good practice: Always check for remaining missing values after cleaning</span>
<span class="n">missing_summary</span> <span class="o">=</span> <span class="n">df_final</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Resumen de valores faltantes (porcentaje):</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="n">missing_summary</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resumen de valores faltantes (porcentaje):

YEAR                   0.0
MO                     0.0
ICU_Index              0.0
SolarIndex             0.0
NBHD                   0.0
LOCALITY               0.0
WS50M                  0.0
T2MWET                 0.0
T2MDEW                 0.0
ALLSKY_SFC_SW_DIFF     0.0
ALLSKY_SFC_UV_INDEX    0.0
PS                     0.0
WD10M                  0.0
WS10M                  0.0
RH2M                   0.0
PRECTOTCORR            0.0
T2M                    0.0
HR                     0.0
DY                     0.0
ICU_Categoria          0.0
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Export the cleaned DataFrame to a CSV file to be used in the models notebook</span>
<span class="c1"># Good practice: Always include the `index=False` parameter to avoid exporting the DataFrame index as a separate column</span>
<span class="c1"># Good practice: Use descriptive file names to indicate the content and purpose of the file</span>
<span class="n">df_final</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;df_final.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DataFrame exported successfully to &#39;df_final.csv&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DataFrame exported successfully to &#39;df_final.csv&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="analisis-visual">
<h2><strong>Análisis visual</strong><a class="headerlink" href="#analisis-visual" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear un mapa de colores para las localidades</span>
<span class="n">color_map</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Centro&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Sur&#39;</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Occidente&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Oriente&#39;</span><span class="p">:</span> <span class="s1">&#39;purple&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Norte&#39;</span><span class="p">:</span> <span class="s1">&#39;orange&#39;</span>
<span class="p">}</span>

<span class="c1"># Crear una figura con 4 subplots (2x2)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="c1"># Iterar sobre las localidades y crear un gráfico para cada una</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">localidad</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">localidades</span><span class="p">[:</span><span class="mi">4</span><span class="p">]):</span>  <span class="c1"># Limitar a las primeras 4 localidades</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="o">%</span><span class="k">2</span>]
    <span class="c1"># Crear un grafo vacío para la localidad actual</span>
    <span class="n">G_localidad</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
    
    <span class="c1"># Añadir nodos y aristas al grafo</span>
    <span class="n">G_localidad</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">localidad</span><span class="p">)</span>
    <span class="n">barrios</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="p">[</span><span class="n">df_cleaned</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">localidad</span><span class="p">][</span><span class="s1">&#39;NBHD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">barrio</span> <span class="ow">in</span> <span class="n">barrios</span><span class="p">:</span>
        <span class="n">G_localidad</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">barrio</span><span class="p">)</span>
        <span class="n">G_localidad</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">localidad</span><span class="p">,</span> <span class="n">barrio</span><span class="p">)</span>
    
    <span class="c1"># Asignar colores a los nodos</span>
    <span class="n">node_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">color_map</span><span class="p">[</span><span class="n">localidad</span><span class="p">]</span> <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="n">localidad</span> <span class="k">else</span> <span class="s1">&#39;skyblue&#39;</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">G_localidad</span><span class="o">.</span><span class="n">nodes</span><span class="p">()]</span>
    
    <span class="c1"># Dibujar el grafo</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G_localidad</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Ajustar el parámetro k para espaciar los nodos</span>
    <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G_localidad</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="n">node_colors</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">font_weight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Árbol de Barrios en </span><span class="si">{</span><span class="n">localidad</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/706026312205aa4b305b827af74f3323ea84f65886e70b3e51e5a2291063af7f.png" src="../_images/706026312205aa4b305b827af74f3323ea84f65886e70b3e51e5a2291063af7f.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definir las variables relacionadas con la generación de microclimas</span>
<span class="n">microclimate_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;T2M&#39;</span><span class="p">,</span> <span class="s1">&#39;RH2M&#39;</span><span class="p">,</span> <span class="s1">&#39;WS10M&#39;</span><span class="p">,</span> <span class="s1">&#39;WD10M&#39;</span><span class="p">,</span> <span class="s1">&#39;PS&#39;</span><span class="p">]</span>

<span class="c1"># Crear una figura con subplots para gráficos de líneas</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">microclimate_vars</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Iterar sobre las variables de microclima y crear un gráfico de líneas para cada una</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">microclimate_vars</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">localidad</span> <span class="ow">in</span> <span class="n">localidades</span><span class="p">:</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">localidad</span><span class="p">],</span>
            <span class="n">x</span><span class="o">=</span><span class="s1">&#39;YEAR&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">localidad</span>
        <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cambio de </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s1"> a lo largo del tiempo&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Año&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Localidad&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Crear una figura con subplots para boxplots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">microclimate_vars</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>

<span class="c1"># Iterar sobre las variables de microclima y crear un boxplot para cada una</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">microclimate_vars</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Distribución de </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s1"> por Localidad&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Localidad&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Crear una figura para heatmaps de correlación</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">localidades</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>

<span class="c1"># Iterar sobre las localidades y crear un heatmap de correlación para cada una</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">localidad</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">localidades</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">corr_matrix_localidad</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">localidad</span><span class="p">][</span><span class="n">microclimate_vars</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span>
        <span class="n">corr_matrix_localidad</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">,</span>
        <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Matriz de Correlación de Variables de Microclima en </span><span class="si">{</span><span class="n">localidad</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/d594fe18e89e17544ecb8ccf1873c3fef5536e2512fc6f5d36f7dba2d340f620.png" src="../_images/d594fe18e89e17544ecb8ccf1873c3fef5536e2512fc6f5d36f7dba2d340f620.png" />
<img alt="../_images/1eeb21cc4506fdf7fe1d971eb7331c36af2d176658847a8f6427926037fad8a2.png" src="../_images/1eeb21cc4506fdf7fe1d971eb7331c36af2d176658847a8f6427926037fad8a2.png" />
<img alt="../_images/5a04847d062739ac7eddfee559418b732bc7ddd46fcada74f87c8525c8db1643.png" src="../_images/5a04847d062739ac7eddfee559418b732bc7ddd46fcada74f87c8525c8db1643.png" />
</div>
</div>
<section id="analisis-espacial-y-temporal-de-variables-de-microclima-por-localidad-en-barranquilla">
<h3><strong>Análisis Espacial y Temporal de Variables de Microclima por Localidad en Barranquilla</strong><a class="headerlink" href="#analisis-espacial-y-temporal-de-variables-de-microclima-por-localidad-en-barranquilla" title="Permalink to this heading">#</a></h3>
<section id="cambios-temporales-de-variables-por-localidad">
<h4>1. Cambios Temporales de Variables por Localidad<a class="headerlink" href="#cambios-temporales-de-variables-por-localidad" title="Permalink to this heading">#</a></h4>
<p>Los gráficos de líneas con bandas de error muestran la evolución promedio de variables clave (<code class="docutils literal notranslate"><span class="pre">T2M</span></code>, <code class="docutils literal notranslate"><span class="pre">RH2M</span></code>, <code class="docutils literal notranslate"><span class="pre">WS10M</span></code>, <code class="docutils literal notranslate"><span class="pre">WD10M</span></code>, <code class="docutils literal notranslate"><span class="pre">PS</span></code>) desde 2020 hasta 2025:</p>
<ul class="simple">
<li><p><strong>T2M (Temperatura a 2m):</strong> Presenta estabilidad relativa en todas las localidades con un ligero aumento hacia 2024 y una caída en 2025. Las diferencias entre localidades son marginales.</p></li>
<li><p><strong>RH2M (Humedad relativa a 2m):</strong> El comportamiento es coherente en la mayoría de localidades, excepto en <strong>Norte</strong>, donde hay un cambio abrupto en 2025. Esto sugiere un posible error en datos o un fenómeno climático localizado.</p></li>
<li><p><strong>WS10M (Viento a 10m):</strong> Aumento progresivo hacia 2025, destacando mayor variabilidad en Norte, lo que puede relacionarse con cambios en uso del suelo o topografía.</p></li>
<li><p><strong>WD10M (Dirección del viento a 10m):</strong> Varía por año, pero es homogénea entre localidades. El descenso en 2025 podría deberse a eventos meteorológicos específicos.</p></li>
<li><p><strong>PS (Presión superficial):</strong> Extremadamente estable con un leve aumento en 2025. Todas las localidades comparten valores similares.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="distribucion-de-variables-por-localidad">
<h4>2. Distribución de Variables por Localidad<a class="headerlink" href="#distribucion-de-variables-por-localidad" title="Permalink to this heading">#</a></h4>
<p>Los boxplots muestran cómo se comportan las variables de microclima en cada zona geográfica:</p>
<ul class="simple">
<li><p><strong>T2M, WS10M y PS</strong> tienen distribuciones similares entre localidades, con pocos valores atípicos.</p></li>
<li><p><strong>RH2M</strong> en <strong>Norte</strong> muestra una distribución anómala respecto a las demás, reforzando la sospecha de inconsistencias o condiciones microclimáticas extremas.</p></li>
<li><p><strong>WD10M</strong> tiene una distribución amplia y homogénea en todas las localidades, lo que indica que la dirección del viento es altamente variable y no concentrada en una sola dirección dominante.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="correlacion-entre-variables-por-localidad">
<h4>3. Correlación entre Variables por Localidad<a class="headerlink" href="#correlacion-entre-variables-por-localidad" title="Permalink to this heading">#</a></h4>
<p>Las matrices de correlación indican patrones comunes:</p>
<ul class="simple">
<li><p><strong>T2M y RH2M</strong> tienen una correlación negativa ligera (-0.09), como se esperaría entre temperatura y humedad.</p></li>
<li><p><strong>WS10M y WD10M</strong> tienen correlaciones negativas moderadas (-0.45), coherente con la dinámica natural del viento: mayor velocidad implica menos variación direccional.</p></li>
<li><p>La <strong>presión superficial (PS)</strong> presenta una correlación débil o casi nula con las demás variables, indicando que su influencia en el comportamiento general del microclima puede ser menor en estas escalas.</p></li>
<li><p>Las correlaciones son muy similares entre localidades, lo que sugiere una estructura climática homogénea en términos de relaciones entre variables, aunque se detectan anomalías locales como en RH2M del Norte.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="conclusion-general">
<h4>Conclusión General<a class="headerlink" href="#conclusion-general" title="Permalink to this heading">#</a></h4>
<p>Este análisis respalda la hipótesis de que el microclima en Barranquilla es relativamente homogéneo en la mayoría de las variables, pero con posibles anomalías localizadas en el norte (especialmente en humedad). Estas observaciones podrían ser clave al evaluar potenciales de generación solar local o planificar intervenciones de infraestructura climáticamente resilientes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definir las variables relacionadas con el aprovechamiento de la energía solar</span>
<span class="n">solar_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ALLSKY_SFC_UV_INDEX&#39;</span><span class="p">,</span> <span class="s1">&#39;ALLSKY_SFC_SW_DIFF&#39;</span><span class="p">,</span> <span class="s1">&#39;SolarIndex&#39;</span><span class="p">]</span>

<span class="c1"># Crear una figura con 3 subplots (1 fila, 3 columnas)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Iterar sobre las variables solares y crear un gráfico para cada una</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">solar_vars</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">localidad</span> <span class="ow">in</span> <span class="n">localidades</span><span class="p">:</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">localidad</span><span class="p">],</span>
            <span class="n">x</span><span class="o">=</span><span class="s1">&#39;YEAR&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">localidad</span>
        <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cambio de </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s1"> a lo largo del tiempo&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Año&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Localidad&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Crear una figura con subplots para boxplots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solar_vars</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>

<span class="c1"># Iterar sobre las variables solares y crear un boxplot para cada una</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">solar_vars</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Distribución de </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s1"> por Localidad&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Localidad&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Crear una figura para heatmaps de correlación</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">localidades</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>

<span class="c1"># Iterar sobre las localidades y crear un heatmap de correlación para cada una</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">localidad</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">localidades</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">corr_matrix_localidad</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">localidad</span><span class="p">][</span><span class="n">solar_vars</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span>
        <span class="n">corr_matrix_localidad</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">,</span>
        <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Matriz de Correlación de Variables de Energía Solar en </span><span class="si">{</span><span class="n">localidad</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/020c50d4e70c8ee196e8fa0ae76273954a73d1ae4ee402b6b8e60040c38590d5.png" src="../_images/020c50d4e70c8ee196e8fa0ae76273954a73d1ae4ee402b6b8e60040c38590d5.png" />
<img alt="../_images/cdee9e8ee4c2ce04898df497beca07a2f8794136c535a63bb13c0d4f263e5aa7.png" src="../_images/cdee9e8ee4c2ce04898df497beca07a2f8794136c535a63bb13c0d4f263e5aa7.png" />
<img alt="../_images/b121fdb4fafa3d4cbca3e9907b873db5863c2e6357bf9bad13a774036210468e.png" src="../_images/b121fdb4fafa3d4cbca3e9907b873db5863c2e6357bf9bad13a774036210468e.png" />
</div>
</div>
</section>
</section>
<section id="analisis-de-variables-relacionadas-con-la-energia-solar">
<h3><strong>Análisis de Variables Relacionadas con la Energía Solar</strong><a class="headerlink" href="#analisis-de-variables-relacionadas-con-la-energia-solar" title="Permalink to this heading">#</a></h3>
<section id="cambios-temporales-por-localidad">
<h4>Cambios Temporales por Localidad<a class="headerlink" href="#cambios-temporales-por-localidad" title="Permalink to this heading">#</a></h4>
<p>El análisis temporal revela los siguientes patrones consistentes a lo largo de los años para las cinco localidades (Centro, Sur, Occidente, Oriente y Norte):</p>
</section>
<section id="allsky-sfc-uv-index">
<h4>ALLSKY_SFC_UV_INDEX<a class="headerlink" href="#allsky-sfc-uv-index" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Se observa un <strong>incremento progresivo</strong> desde 2022 hasta 2024 en todas las localidades.</p></li>
<li><p>Este aumento sugiere un crecimiento en la intensidad del índice UV, lo cual puede estar asociado a menores niveles de nubosidad o variaciones atmosféricas favorables a la radiación solar directa.</p></li>
</ul>
</section>
<section id="allsky-sfc-sw-diff-irradiancia-solar-difusa">
<h4>ALLSKY_SFC_SW_DIFF (Irradiancia Solar Difusa)<a class="headerlink" href="#allsky-sfc-sw-diff-irradiancia-solar-difusa" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Las curvas son más estables en el tiempo, con <strong>ligeras caídas en 2023</strong> y recuperación en 2024.</p></li>
<li><p>Se mantiene una tendencia general positiva, con el <strong>norte mostrando los niveles más bajos</strong>, probablemente asociado a condiciones de mayor nubosidad o variabilidad atmosférica.</p></li>
</ul>
</section>
<section id="solarindex">
<h4>SolarIndex<a class="headerlink" href="#solarindex" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Se aprecia una <strong>tendencia creciente</strong>, lo cual confirma que el potencial solar ha mejorado progresivamente en los últimos años.</p></li>
<li><p>Las regiones <strong>Centro, Sur y Oriente</strong> destacan como las más consistentes, mientras que <strong>el Norte muestra los valores más bajos</strong>, posiblemente por las condiciones microclimáticas desfavorables.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="distribucion-por-localidad">
<h4>Distribución por Localidad<a class="headerlink" href="#distribucion-por-localidad" title="Permalink to this heading">#</a></h4>
<p>Los boxplots nos permiten observar la dispersión y los valores atípicos por localidad:</p>
<ul class="simple">
<li><p><strong>ALLSKY_SFC_UV_INDEX</strong> presenta una distribución <strong>similar entre localidades</strong>, con ligeras variaciones hacia la zona norte.</p></li>
<li><p><strong>ALLSKY_SFC_SW_DIFF</strong> muestra una mayor dispersión y <strong>presencia de outliers</strong>, especialmente en Oriente y Norte.</p></li>
<li><p><strong>SolarIndex</strong> es más concentrado, aunque también muestra <strong>valores atípicos</strong>, lo que refleja condiciones atmosféricas excepcionales en ciertas fechas.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="correlaciones-locales-entre-variables-solares">
<h4>Correlaciones Locales entre Variables Solares<a class="headerlink" href="#correlaciones-locales-entre-variables-solares" title="Permalink to this heading">#</a></h4>
<p>Las matrices de correlación indican relaciones internas entre las variables:</p>
<ul class="simple">
<li><p><strong>Alta correlación entre <code class="docutils literal notranslate"><span class="pre">ALLSKY_SFC_SW_DIFF</span></code> y <code class="docutils literal notranslate"><span class="pre">SolarIndex</span></code> (≈0.91)</strong> en todas las localidades, lo que confirma que la irradiancia difusa es el principal determinante del índice solar compuesto.</p></li>
<li><p>El índice UV (<code class="docutils literal notranslate"><span class="pre">ALLSKY_SFC_UV_INDEX</span></code>) también tiene una <strong>correlación moderada</strong> con <code class="docutils literal notranslate"><span class="pre">SolarIndex</span></code> (≈0.52 - 0.53), lo que demuestra su influencia, aunque menor que la irradiancia difusa.</p></li>
<li><p>En el caso particular del <strong>Norte</strong>, el patrón cambia: el índice UV tiene <strong>mayor correlación con <code class="docutils literal notranslate"><span class="pre">SolarIndex</span></code> que la irradiancia difusa</strong>, lo que puede indicar una <strong>anomalía climática o particularidad atmosférica local</strong>.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id2">
<h4>Conclusiones<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>El potencial solar (representado por <code class="docutils literal notranslate"><span class="pre">SolarIndex</span></code>) ha mostrado una <strong>mejora consistente desde 2022</strong>, lo cual es favorable para estrategias de generación solar.</p></li>
<li><p>La <strong>irradiancia difusa es el factor más determinante</strong> del potencial solar, aunque el índice UV también cumple un rol complementario importante.</p></li>
<li><p>Existen diferencias por localidad, siendo el <strong>Norte</strong> la zona con menor potencial y <strong>Centro/Sur</strong> las más estables y con mayor consistencia en las métricas de energía solar.</p></li>
<li><p>Estos hallazgos pueden orientar futuras <strong>estrategias de instalación de paneles solares</strong> y optimización de recursos en función del comportamiento espacial y temporal de las variables atmosféricas.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obtener las localidades únicas</span>
<span class="n">localidades</span> <span class="o">=</span> <span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="c1"># Crear una figura con 6 subplots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Definir una paleta de colores</span>
<span class="n">palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;husl&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">localidades</span><span class="p">))</span>

<span class="c1"># Iterar sobre las localidades y crear un gráfico para cada una</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">localidad</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">localidades</span><span class="p">[:</span><span class="mi">6</span><span class="p">]):</span>  <span class="c1"># Limitar a las primeras 6 localidades</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">]</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="n">df_cleaned_limits</span><span class="p">[</span><span class="s1">&#39;LOCALITY&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">localidad</span><span class="p">],</span>
        <span class="n">x</span><span class="o">=</span><span class="s1">&#39;YEAR&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;T2M&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">palette</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cambio de Temperatura en </span><span class="si">{</span><span class="n">localidad</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Año&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperatura (°C)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/99941a3b2d490cce5e2354de84717a306d7c4c6da6eaa91aa5f44e9a9696b905.png" src="../_images/99941a3b2d490cce5e2354de84717a306d7c4c6da6eaa91aa5f44e9a9696b905.png" />
</div>
</div>
</section>
</section>
<section id="analisis-del-cambio-de-temperatura-por-localidad-2020-2025">
<h3><strong>Análisis del Cambio de Temperatura por Localidad (2020-2025)</strong><a class="headerlink" href="#analisis-del-cambio-de-temperatura-por-localidad-2020-2025" title="Permalink to this heading">#</a></h3>
<p>Los gráficos muestran la evolución anual de la temperatura promedio a 2 metros (<code class="docutils literal notranslate"><span class="pre">T2M</span></code>) en cada una de las cinco localidades de Barranquilla: Centro, Sur, Occidente, Oriente y Norte.</p>
<section id="observaciones-generales">
<h4>Observaciones Generales<a class="headerlink" href="#observaciones-generales" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>En todas las localidades se observa una <strong>disminución de la temperatura en el año 2022</strong>, seguida de una <strong>recuperación progresiva hasta 2024</strong>, donde se alcanza el <strong>valor máximo en el periodo observado</strong>.</p></li>
<li><p>El <strong>año 2025 muestra una ligera caída en la temperatura</strong>, aunque los valores siguen siendo más altos que los mínimos registrados en 2022.</p></li>
</ul>
</section>
<section id="analisis-por-localidad">
<h4>Análisis por Localidad<a class="headerlink" href="#analisis-por-localidad" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>Centro</strong>: Presenta un patrón simétrico con un mínimo claro en 2022 y un pico en 2024, indicando posible influencia de eventos climáticos puntuales.</p></li>
<li><p><strong>Sur y Oriente</strong>: Exhiben una caída sostenida hasta 2022, seguida de una recuperación más pronunciada. La variabilidad interanual es baja.</p></li>
<li><p><strong>Occidente y Norte</strong>: Aunque siguen el mismo patrón general, tienen una dispersión ligeramente mayor en 2025, lo que podría indicar una mayor variabilidad climática reciente en estas zonas.</p></li>
</ul>
</section>
<section id="id3">
<h4>Conclusiones<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>El <strong>aumento generalizado de temperatura entre 2022 y 2024</strong> sugiere un <strong>periodo de calentamiento reciente</strong> que podría influir en la <strong>generación de energía solar</strong>, ya que la temperatura afecta la eficiencia de los sistemas fotovoltaicos.</p></li>
<li><p>Este comportamiento justifica continuar con el <strong>seguimiento anual de microclimas locales</strong>, especialmente si se desea optimizar la producción energética por zonas.</p></li>
</ul>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><strong>Contextualización:</strong></p>
      </div>
    </a>
    <a class="right-next"
       href="metodologia_modelos_regresion.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><strong>Modelos de Regresión</strong></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#librerias"><strong>Librerias:</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-preliminar"><strong>Análisis preliminar</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-analisis-de-tipos-nulos-y-nan-values"><strong>Variables: análisis de tipos,nulos y Nan values</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-correlacion"><strong>Análisis de correlación:</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-correlacion-entre-variables-climaticas"><strong>Análisis de Correlación entre Variables Climáticas</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#relaciones-fuertemente-positivas">1. Relaciones fuertemente positivas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#relaciones-fuertemente-negativas">2. Relaciones fuertemente negativas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#correlaciones-moderadas-a-bajas">3. Correlaciones moderadas a bajas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusiones">Conclusiones</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-normalidad-y-distribucion-de-variables"><strong>Análisis de Normalidad y Distribución de Variables</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prueba-de-normalidad-shapiro-wilk"><strong>Prueba de Normalidad (Shapiro-Wilk)</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resultados-destacados"><strong>Resultados destacados</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-con-mejor-ajuste-relativo-a-la-normalidad"><strong>Variables con mejor ajuste relativo a la normalidad</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-que-presentan-mayor-desviacion-de-la-normalidad"><strong>Variables que presentan mayor desviación de la normalidad</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-temporales"><strong>Variables temporales</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#prueba-de-independencia-chi-cuadrado"><strong>Prueba de Independencia Chi-Cuadrado</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><strong>Conclusiones</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#limpieza-final"><strong>Limpieza Final</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-visual"><strong>Análisis visual</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-espacial-y-temporal-de-variables-de-microclima-por-localidad-en-barranquilla"><strong>Análisis Espacial y Temporal de Variables de Microclima por Localidad en Barranquilla</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cambios-temporales-de-variables-por-localidad">1. Cambios Temporales de Variables por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-de-variables-por-localidad">2. Distribución de Variables por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#correlacion-entre-variables-por-localidad">3. Correlación entre Variables por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion-general">Conclusión General</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-variables-relacionadas-con-la-energia-solar"><strong>Análisis de Variables Relacionadas con la Energía Solar</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cambios-temporales-por-localidad">Cambios Temporales por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#allsky-sfc-uv-index">ALLSKY_SFC_UV_INDEX</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#allsky-sfc-sw-diff-irradiancia-solar-difusa">ALLSKY_SFC_SW_DIFF (Irradiancia Solar Difusa)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#solarindex">SolarIndex</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-por-localidad">Distribución por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#correlaciones-locales-entre-variables-solares">Correlaciones Locales entre Variables Solares</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Conclusiones</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-del-cambio-de-temperatura-por-localidad-2020-2025"><strong>Análisis del Cambio de Temperatura por Localidad (2020-2025)</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#observaciones-generales">Observaciones Generales</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-por-localidad">Análisis por Localidad</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Conclusiones</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Eliana Rodríguez - Jesús Arévalo
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>